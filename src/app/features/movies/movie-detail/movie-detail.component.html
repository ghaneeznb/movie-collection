<div *ngIf="loading" class="flex justify-center my-5">
  <div class="w-12 h-12 border-4 border-gray-300 border-t-cyan-500 rounded-full animate-spin"></div>
</div>


<div class="min-h-screen bg-gray-100 py-6 flex flex-col justify-center sm:py-12" *ngIf="!loading && movie">

  <div class="py-3 sm:mx-auto">
    <div class="bg-white shadow-lg border-gray-100 max-h-80	 border sm:rounded-3xl p-8 flex space-x-8">
      <div class="h-48 overflow-visible w-1/2">
        <img class="rounded-3xl shadow-lg" [src]="movie.Poster !== 'N/A' ? movie.Poster : 'assets/no-image.png'"
          alt="{{ movie.Title }} poster">
      </div>
      <div class="flex flex-col w-1/2 space-y-4">
        <div class="flex justify-between items-start">
          <h2 class="text-3xl font-bold">{{ movie.Title | removeAfterColon }}</h2>
          <div class="bg-yellow-400 font-bold rounded-xl p-2">
            <div *ngIf="movie?.Ratings?.length" class="text-sm">
              <div class="flex items-center" *ngFor="let rating of movie.Ratings">
                <ng-container *ngIf="rating.Source == 'Internet Movie Database'">
                  <p class="ms-2 text-sm font-bold text-gray-900 dark:text-white">{{ rating.Value }}</p>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
        <div>
          <div class="text-sm text-gray-400">{{ movie.Year }}</div>
          <div class="text-lg text-gray-800">{{ movie.Type | titlecase }}</div>
        </div>
        <p class=" text-gray-400 max-h-40 overflow-y-hidden">{{ movie.Plot }}</p>
        <div class="flex justify-end items-end mb-2">
          <button class="text-lg lg:text-sm font-bold py-2 px-5 rounded flex justify-end self-end mb-2"
            [ngClass]="isInWatchlist ? 'bg-orange-300 text-orange-700' : 'bg-teal-300 text-teal-700'"
            (click)="handleWatchlistAction()">
            {{ isInWatchlist ? 'Remove from Watchlist' : 'Add to Watchlist' }}</button>
        </div>
      </div>

    </div>
  </div>

</div>