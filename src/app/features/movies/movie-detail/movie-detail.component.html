<div *ngIf="loading" class="flex justify-center items-center min-h-screen">
  <div class="animate-spin h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full"></div>
</div>

<div *ngIf="!loading && movie" class="flex justify-center p-6">
  <div class="bg-gray-800 text-white rounded-xl shadow-lg overflow-hidden max-w-xl w-full">
    <div class="relative w-full h-[400px]">
      <img 
        [src]="movie.Poster !== 'N/A' ? movie.Poster : 'assets/no-image.png'" 
        alt="{{ movie.Title }} poster" 
        class="absolute top-0 left-0 w-full h-full object-cover"
      />
      <span class="absolute top-3 right-3 bg-black bg-opacity-80 text-white px-3 py-1 rounded-md text-sm font-semibold">
        {{ movie.Year }} • {{ movie.Type | titlecase }}
      </span>
      <div *ngIf="movie?.Ratings?.length" class="absolute bottom-3 left-3 bg-black bg-opacity-60 p-2 rounded-md text-sm">
        <div *ngFor="let rating of movie.Ratings" class="text-yellow-400 font-semibold">
          <ng-container *ngIf="rating.Source == 'Internet Movie Database'">
            ⭐ {{ rating.Value }}
          </ng-container>
        </div>
      </div>
    </div>

    <div class="p-6">
      <h2 class="text-2xl font-semibold mb-2">{{ movie.Title | removeAfterColon }}</h2>
      <p class="text-gray-300 text-sm">{{ movie.Plot }}</p>
    </div>

    <div class="flex justify-end p-4">
      <button 
      class="px-4 py-2 mt-3 text-white rounded-md transition duration-200"
      [ngClass]="isInWatchlist ? 'bg-red-500 hover:bg-red-600' : 'bg-blue-500 hover:bg-blue-600'"
      (click)="handleWatchlistAction()">
      {{ isInWatchlist ? 'Remove from Watchlist' : 'Add to Watchlist' }}
      </button>
    </div>
  </div>
</div>
